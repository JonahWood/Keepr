import{_ as B,r as C,b as j,A as o,B as K,u as p,P as n,i as h,l as u,K as S,V as A,c as i,a,C as T,t as g,s as _,F as D,g as F,y as N,D as H,o as l,j as M,x as R,n as z,p as E,m as L}from"./index.f3562c27.js";const U={setup(){const r=R(),c=N(),y=C({});async function e(){try{const t=r.params.vaultId;await h.getVaultById(t)}catch(t){n.error("This vault is private"),u.error(t),c.push({name:"Home"})}}function k(){o.keepBool=!0}function f(){o.keepBool=!1}async function v(){try{const t=r.params.vaultId;await H.getVaultKeeps(t),u.log("Appstate keeps:",o.keeps)}catch(t){n.error(t.message),u.error(t)}}return j(()=>{k(),o.account!={}&&(e(),v())}),K(()=>{f()}),{vault:p(()=>o.activeVault),keeps:p(()=>o.keeps),account:p(()=>o.account),editable:y,async makePrivate(t){try{if(await n.confirm("Are you sure you want to make this vault private?","This cannot be undone!")){const s={isPrivate:!0};await h.makePrivate(t,s),n.toast(`${o.activeVault.name} has been made private.`)}}catch(s){n.error(s.message),u.error(s)}},async deleteVault(t){try{await n.confirm("Are you sure you'd like to delete this vault?")&&(await h.deleteVault(t),c.push({name:"Home"}),n.success("Vault deleted"))}catch(s){n.error(s.message),u.error(s)}}}},components:{KeepCard:S,VKeepCard:A}},P=r=>(E("data-v-2d629eb3"),r=r(),L(),r),q={class:"container"},G={class:"row justify-content-center mt-2"},J={class:"text-uppercase vTitle text-light d-flex justify-content-center align-items-end"},O={class:"creator text-light d-flex justify-content-center align-items-end"},Q={key:0,class:"text-light vTitle d-flex justify-content-center align-items-end"},W={class:"align-items-center d-flex"},X=P(()=>a("i",{class:"mdi mdi-lock-open-variant text-warning lock-shadow"},null,-1)),Y=[X],Z={key:1,title:"Vault is already private",class:"btn big-btn",disabled:""},$=P(()=>a("i",{class:"mdi mdi-lock text-warning lock-shadow"},null,-1)),ee=[$],te={class:"row mt-2 justify-content-center"},ae={class:"col-md-6 keepCount"},se={class:"d-flex justify-content-center"},oe={key:0,class:"d-flex justify-content-center"},ne={title:"Delete Vault"},re={class:"row mt-2"},ce={class:"grid-container rounded"},ie={class:"col-md-3"};function le(r,c,y,e,k,f){var t,s,V,b,x,w,I;const v=z("VKeepCard");return l(),i("div",q,[a("section",G,[a("div",{class:"col-md-6 rounded makecover",style:T(`background-image: url(${(t=e.vault)==null?void 0:t.img})`)},[a("h1",J,g((s=e.vault)==null?void 0:s.name),1),a("h6",O,"by "+g((V=e.vault)==null?void 0:V.creator.name),1),((b=e.vault)==null?void 0:b.creatorId)==e.account.id?(l(),i("h6",Q,[a("div",W,[(x=e.vault)!=null&&x.isPrivate?_("",!0):(l(),i("button",{key:0,title:"Make private",class:"btn big-btn",onClick:c[0]||(c[0]=m=>{var d;return e.makePrivate((d=e.vault)==null?void 0:d.id)})},Y)),(w=e.vault)!=null&&w.isPrivate?(l(),i("button",Z,ee)):_("",!0)])])):_("",!0)],4)]),a("section",te,[a("div",ae,[a("h6",se,g(e.keeps.length)+" Keeps",1),((I=e.vault)==null?void 0:I.creatorId)==e.account.id?(l(),i("div",oe,[a("h3",ne,[a("i",{class:"mdi mdi-delete-forever text-danger selectable",onClick:c[1]||(c[1]=m=>{var d;return e.deleteVault((d=e.vault)==null?void 0:d.id)})})])])):_("",!0)])]),a("div",re,[a("section",ce,[(l(!0),i(D,null,F(e.keeps,m=>(l(),i("div",ie,[M(v,{keep:m},null,8,["keep"])]))),256))])])])}const ue=B(U,[["render",le],["__scopeId","data-v-2d629eb3"]]);export{ue as default};
